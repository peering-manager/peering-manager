{% extends 'peering/internetexchange/_base.html' %}
{% load helpers %}
{% block subcontent %}
<div class="row">
  <div class="col-md-6">
    <div class="card mb-2">
      <div class="card-header">
        <strong>IX Details</strong>
      </div>
      <table class="card-body table table-hover attr-table mb-0">
        <tr>
          <td>Name</td>
          <td>{{ instance.name }}</td>
        </tr>
        <tr>
          <td>IPv6 Address</td>
          <td>{{ instance.ipv6_address|render_none }}</td>
        </tr>
        <tr>
          <td>IPv4 Address</td>
          <td>{{ instance.ipv4_address|render_none }}</td>
        </tr>
        <tr>
          <td>Local AS</td>
          <td>{{ instance.local_autonomous_system|as_link }}</td>
        </tr>
        {% if instance.router %}
        <tr>
          <td>Router</td>
          <td>{{ instance.router|as_link }}</td>
        </tr>
        {% endif %}
        {% if instance.router %}
        <tr>
          <td>Poll Session States</td>
          <td>
            {% if instance.check_bgp_session_states %}
            <i class="fas fa-check text-success"></i>
            {% else %}
            <i class="fas fa-times text-danger"></i>
            {% endif %}
          </td>
        </tr>
        {% endif %}
      </table>
    </div>
    {% if instance.linked_to_peeringdb %}
    <div class="card mb-2">
      <div class="card-header">
        <strong>IX Prefixes</strong>
      </div>
      <ul class="list-group list-group-flush">
        {% for ixlan_prefix in instance.get_prefixes %}
        <li class="list-group-item">{{ ixlan_prefix.prefix }}</li>
        {% endfor %}
      </ul>
      <div class="card-footer">
        <small><sup>1)</sup> These are the prefixes used to connect to the IX network.
        {% if instance.router and instance.router.platform %}<br /><sup>2)</sup> They can be used to discover peering sessions already setup on the router.{% endif %}</small>
      </div>
    </div>
    {% endif %}
  </div>
  <div class="col-md-6">
    <div class="card mb-2">
      <div class="card-header">
        <strong>BGP Communities</strong>
      </div>
      {% if instance.communities.all.count > 0 %}
      <ul class="list-group list-group-flush">
      {% for community in instance.communities.all %}
        <li class="list-group-item">
          {{ community|as_link }} <span class="float-right">{{ community.get_type_html }}</span>
        </li>
      {% endfor %}
      </ul>
      {% else %}
      <div class="card-body">
        <span class="text-muted">None</span>
      </div>
      {% endif %}
    </div>
    <div class="card">
      <div class="card-header">
        <strong>Routing Policies</strong>
      </div>
      {% if instance.export_routing_policies.all.count > 0 or instance.import_routing_policies.all.count > 0 %}
      <ul class="list-group list-group-flush">
      {% for routing_policy in instance.export_routing_policies.all %}
        <li class="list-group-item">
          {{ routing_policy|as_link }} <span class="float-right">{{ routing_policy.get_type_html }}</span>
        </li>
      {% endfor %}
      {% for routing_policy in instance.import_routing_policies.all %}
        <li class="list-group-item">
          {{ routing_policy|as_link }} <span class="float-right">{{ routing_policy.get_type_html }}</span>
        </li>
      {% endfor %}
      </ul>
      {% else %}
      <div class="card-body">
        <span class="text-muted">None</span>
      </div>
      {% endif %}
    </div>
  </div>
  <div class="col-md-6">
    <div class="card">
      <div class="card-header">
        <strong>Comments</strong>
      </div>
      <div class="card-body">
        {% if instance.comments %}
        {{ instance.comments|markdown }}
        {% else %}
        <span class="text-muted">None</span>
        {% endif %}
      </div>
    </div>
    {% include 'utils/includes/tags_card.html' with tags=instance.tags.all url='peering:internetexchange_list' %}
  </div>
</div>
{% endblock %}
